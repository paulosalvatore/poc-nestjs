//******** AUTO GENERATED FILE, DO NOT EDIT.  *********

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
  previewFeatures = ["nativeTypes"]
}


model Audit {
  id         Int        @id @default(autoincrement())
  table      String
  foreignKey Int
  action     AuditAction
  previous   Json?
  after      Json?
  created    DateTime
}

enum AuditAction {
  INSERT
  UPDATE
  DELETE
}


model Meta {
  id       Int      @id @default(autoincrement())
  created  DateTime @default(now())
  modified DateTime @default(now())
  active   Boolean  @default(false)
}


model User {
  id        Int        @id @default(autoincrement())
  email     String     @unique
  password  String
  name      String?
  cpf       String     @unique @db.VarChar(11)
  phone     String?    @db.VarChar(15)
  gender    Gender?
  birthdate DateTime?
  campuses  Campus[]
  role      UserRole[]
  meta      Meta       @relation(fields: [metaId], references: [id])
  metaId    Int
}

model UserRole {
  user   User @relation(fields: [userId], references: [id])
  userId Int
  role   Role

  @@unique([userId, role], name: "unique_user_role")
}

enum Role {
  ADMIN
  STUDENT
  SPEAKER
  RECEPCIONIST
}

model Campus {
  id    Int    @id @default(autoincrement())
  name  String @unique
  users User[]
}

enum Gender {
  MALE
  FEMALE
  OTHER
}
